{"version":3,"sources":["webpack:///./examples/util.js?975e*","webpack:///./examples/draggable.js","webpack:///./examples/draggable.less?9d42"],"names":["generateData","calcTotal","isInclude","filterParentPosition","getFilterExpandedKeys","getRadioSelectKeys","x","y","z","gData","_loop","_level","_preKey","_tns","preKey","tns","children","i","key","push","title","__level","forEach","index","rec","n","Math","pow","console","log","smallArray","bigArray","every","ii","arr","levelObj","item","posLen","split","length","levelArr","Object","keys","sort","j","_i","filter","p","nArr","concat","loopData","data","callback","loop","d","level","pos","spl","str","splitLen","expandedKeys","expandedPosArr","indexOf","filterExpandedKeys","isSibling","pos1","pop","join","selectedKeys","res","pkObjArr","selPkObjArr","lenObj","getPosKey","k","pkArr","pk","Demo","React","createClass","getInitialState","autoExpandParent","onDragStart","onDragEnter","info","setState","onDrop","dropKey","node","props","eventKey","dragKey","dragNode","state","dragObj","splice","dropToGap","ar","rawExpandedKeys","onExpand","arguments","render","map","ReactDOM","document","getElementById"],"mappings":";;;;;;;;;;;;;;;;;;SAEgBA,Y,GAAAA,Y;SA0BAC,S,GAAAA,S;SAUAC,S,GAAAA,S;SASAC,oB,GAAAA,oB;SAuDAC,qB,GAAAA,qB;SA0BAC,kB,GAAAA,kB;AAhIhB;;AAEO,UAASL,YAAT,GAAuD;AAAA,OAAjCM,CAAiC,uEAA7B,CAA6B;AAAA,OAA1BC,CAA0B,uEAAtB,CAAsB;AAAA,OAAnBC,CAAmB,uEAAf,CAAe;AAAA,OAAZC,KAAY,uEAAJ,EAAI;;AAC5D;AACA,YAASC,KAAT,CAAeC,MAAf,EAAuBC,OAAvB,EAAgCC,IAAhC,EAAsC;AACpC,SAAMC,SAASF,WAAW,GAA1B;AACA,SAAMG,MAAMF,QAAQJ,KAApB;;AAEA,SAAMO,WAAW,EAAjB;AACA,UAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIX,CAApB,EAAuBW,GAAvB,EAA4B;AAC1B,WAAMC,MAASJ,MAAT,SAAmBG,CAAzB;AACAF,WAAII,IAAJ,CAAS,EAAEC,OAAUF,GAAV,WAAF,EAAyBA,KAAQA,GAAR,SAAzB,EAAT;AACA,WAAID,IAAIV,CAAR,EAAW;AACTS,kBAASG,IAAT,CAAcD,GAAd;AACD;AACF;AACD,SAAIP,SAAS,CAAb,EAAgB;AACd,cAAOI,GAAP;AACD;AACD,SAAMM,UAAUV,SAAS,CAAzB;AACAK,cAASM,OAAT,CAAiB,UAACJ,GAAD,EAAMK,KAAN,EAAgB;AAC/BR,WAAIQ,KAAJ,EAAWP,QAAX,GAAsB,EAAtB;AACA,cAAON,MAAMW,OAAN,EAAeH,GAAf,EAAoBH,IAAIQ,KAAJ,EAAWP,QAA/B,CAAP;AACD,MAHD;AAID;AACDN,SAAMF,CAAN;AACA,UAAOC,KAAP;AACD;AACM,UAASR,SAAT,GAAwC;AAAA,OAArBK,CAAqB,uEAAjB,CAAiB;AAAA,OAAdC,CAAc,uEAAV,CAAU;AAAA,OAAPC,CAAO,uEAAH,CAAG;;AAC7C;AACA,OAAMgB,MAAM,SAANA,GAAM,CAACC,CAAD;AAAA,YAAOA,KAAK,CAAL,GAASnB,IAAIoB,KAAKC,GAAL,CAASpB,CAAT,EAAYkB,GAAZ,CAAJ,GAAuBD,IAAIC,CAAJ,CAAhC,GAAyC,CAAhD;AAAA,IAAZ;AACA,UAAOD,IAAIhB,IAAI,CAAR,CAAP;AACD;AACDoB,SAAQC,GAAR,CAAY,eAAZ,EAA6B5B,WAA7B;AACA;;AAEO,KAAMQ,wBAAQT,cAAd;;AAEA,UAASE,SAAT,CAAmB4B,UAAnB,EAA+BC,QAA/B,EAAyC;AAC9C,UAAOD,WAAWE,KAAX,CAAiB,UAACC,EAAD,EAAKhB,CAAL,EAAW;AACjC,YAAOgB,OAAOF,SAASd,CAAT,CAAd;AACD,IAFM,CAAP;AAGD;AACD;;;AAGA;AACO,UAASd,oBAAT,CAA8B+B,GAA9B,EAAmC;AACxC,OAAMC,WAAW,EAAjB;AACAD,OAAIZ,OAAJ,CAAY,UAACc,IAAD,EAAU;AACpB,SAAMC,SAASD,KAAKE,KAAL,CAAW,GAAX,EAAgBC,MAA/B;AACA,SAAI,CAACJ,SAASE,MAAT,CAAL,EAAuB;AACrBF,gBAASE,MAAT,IAAmB,EAAnB;AACD;AACDF,cAASE,MAAT,EAAiBlB,IAAjB,CAAsBiB,IAAtB;AACD,IAND;AAOA,OAAMI,WAAWC,OAAOC,IAAP,CAAYP,QAAZ,EAAsBQ,IAAtB,EAAjB;;AATwC,gCAU/B1B,CAV+B;AAWtC,SAAIuB,SAASvB,IAAI,CAAb,CAAJ,EAAqB;AACnBkB,gBAASK,SAASvB,CAAT,CAAT,EAAsBK,OAAtB,CAA8B,cAAM;AAAA,sCACzBsB,CADyB;AAEhCT,oBAASK,SAASI,CAAT,CAAT,EAAsBtB,OAAtB,CAA8B,UAACuB,EAAD,EAAKtB,KAAL,EAAe;AAC3C,iBAAIrB,UAAU+B,GAAGK,KAAH,CAAS,GAAT,CAAV,EAAyBO,GAAGP,KAAH,CAAS,GAAT,CAAzB,CAAJ,EAA6C;AAC3CH,wBAASK,SAASI,CAAT,CAAT,EAAsBrB,KAAtB,IAA+B,IAA/B;AACD;AACF,YAJD;AAKAY,oBAASK,SAASI,CAAT,CAAT,IAAwBT,SAASK,SAASI,CAAT,CAAT,EAAsBE,MAAtB,CAA6B;AAAA,oBAAKC,CAAL;AAAA,YAA7B,CAAxB;AAPgC;;AAClC,cAAK,IAAIH,IAAI3B,IAAI,CAAjB,EAAoB2B,IAAIJ,SAASD,MAAjC,EAAyCK,GAAzC,EAA8C;AAAA,kBAArCA,CAAqC;AAO7C;AACF,QATD;AAUD;AAtBqC;;AAUxC,QAAK,IAAI3B,IAAI,CAAb,EAAgBA,IAAIuB,SAASD,MAA7B,EAAqCtB,GAArC,EAA0C;AAAA,YAAjCA,CAAiC;AAazC;AACD,OAAI+B,OAAO,EAAX;AACAR,YAASlB,OAAT,CAAiB,aAAK;AACpB0B,YAAOA,KAAKC,MAAL,CAAYd,SAASlB,CAAT,CAAZ,CAAP;AACD,IAFD;AAGA,UAAO+B,IAAP;AACD;AACD;AACA;AACA;;;AAGA,UAASE,QAAT,CAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;AAChC,OAAMC,OAAO,SAAPA,IAAO,CAACC,CAAD,EAAkB;AAAA,SAAdC,KAAc,uEAAN,CAAM;;AAC7BD,OAAEhC,OAAF,CAAU,UAACc,IAAD,EAAOb,KAAP,EAAiB;AACzB,WAAMiC,MAASD,KAAT,SAAkBhC,KAAxB;AACA,WAAIa,KAAKpB,QAAT,EAAmB;AACjBqC,cAAKjB,KAAKpB,QAAV,EAAoBwC,GAApB;AACD;AACDJ,gBAAShB,IAAT,EAAeb,KAAf,EAAsBiC,GAAtB;AACD,MAND;AAOD,IARD;AASAH,QAAKF,IAAL;AACD;;AAED,UAASM,GAAT,CAAaC,GAAb,EAAkB;AAChB,UAAOA,IAAIpB,KAAJ,CAAU,GAAV,CAAP;AACD;AACD,UAASqB,QAAT,CAAkBD,GAAlB,EAAuB;AACrB,UAAOA,IAAIpB,KAAJ,CAAU,GAAV,EAAeC,MAAtB;AACD;;AAEM,UAASnC,qBAAT,CAA+B+C,IAA/B,EAAqCS,YAArC,EAAmD;AACxD,OAAMC,iBAAiB,EAAvB;AACAX,YAASC,IAAT,EAAe,UAACf,IAAD,EAAOb,KAAP,EAAciC,GAAd,EAAsB;AACnC,SAAII,aAAaE,OAAb,CAAqB1B,KAAKlB,GAA1B,IAAiC,CAAC,CAAtC,EAAyC;AACvC2C,sBAAe1C,IAAf,CAAoBqC,GAApB;AACD;AACF,IAJD;AAKA,OAAMO,qBAAqB,EAA3B;AACAb,YAASC,IAAT,EAAe,UAACf,IAAD,EAAOb,KAAP,EAAciC,GAAd,EAAsB;AACnCK,oBAAevC,OAAf,CAAuB,aAAK;AAC1B,WAAI,CAACqC,SAASH,GAAT,IAAgBG,SAASZ,CAAT,CAAhB,IACAA,EAAEe,OAAF,CAAUN,GAAV,MAAmB,CADnB,IACwBA,QAAQT,CADjC,KAECgB,mBAAmBD,OAAnB,CAA2B1B,KAAKlB,GAAhC,MAAyC,CAAC,CAF/C,EAEkD;AAChD6C,4BAAmB5C,IAAnB,CAAwBiB,KAAKlB,GAA7B;AACD;AACF,MAND;AAOD,IARD;AASA,UAAO6C,kBAAP;AACD;;AAED,UAASC,SAAT,CAAmBR,GAAnB,EAAwBS,IAAxB,EAA8B;AAC5BT,OAAIU,GAAJ;AACAD,QAAKC,GAAL;AACA,UAAOV,IAAIW,IAAJ,CAAS,GAAT,MAAkBF,KAAKE,IAAL,CAAU,GAAV,CAAzB;AACD;;AAEM,UAAS9D,kBAAT,CAA4B8C,IAA5B,EAAkCiB,YAAlC,EAAgDlD,GAAhD,EAAqD;AAC1D,OAAMmD,MAAM,EAAZ;AACA,OAAMC,WAAW,EAAjB;AACA,OAAMC,cAAc,EAApB;AACArB,YAASC,IAAT,EAAe,UAACf,IAAD,EAAOb,KAAP,EAAciC,GAAd,EAAsB;AACnC,SAAIY,aAAaN,OAAb,CAAqB1B,KAAKlB,GAA1B,IAAiC,CAAC,CAAtC,EAAyC;AACvCoD,gBAASnD,IAAT,CAAc,CAACqC,GAAD,EAAMpB,KAAKlB,GAAX,CAAd;AACD;AACD,SAAIA,OAAOA,QAAQkB,KAAKlB,GAAxB,EAA6B;AAC3BqD,mBAAYpD,IAAZ,CAAiBqC,GAAjB,EAAsBpB,KAAKlB,GAA3B;AACD;AACF,IAPD;AAQA,OAAMsD,SAAS,EAAf;AACA,OAAMC,YAAY,SAAZA,SAAY,CAACjB,GAAD,EAAMkB,CAAN,EAAY;AAC5B,SAAMrC,SAASsB,SAASH,GAAT,CAAf;AACA,SAAI,CAACgB,OAAOnC,MAAP,CAAL,EAAqB;AACnBmC,cAAOnC,MAAP,IAAiB,CAAC,CAACmB,GAAD,EAAMkB,CAAN,CAAD,CAAjB;AACD,MAFD,MAEO;AACLF,cAAOnC,MAAP,EAAef,OAAf,CAAuB,UAACqD,KAAD,EAAQ1D,CAAR,EAAc;AACnC,aAAI+C,UAAUP,IAAIkB,MAAM,CAAN,CAAJ,CAAV,EAAyBlB,IAAID,GAAJ,CAAzB,CAAJ,EAAwC;AACtC;AACAgB,kBAAOnC,MAAP,EAAepB,CAAf,IAAoB,CAACuC,GAAD,EAAMkB,CAAN,CAApB;AACD,UAHD,MAGO,IAAIjB,IAAIkB,MAAM,CAAN,CAAJ,MAAkBlB,IAAID,GAAJ,CAAtB,EAAgC;AACrCgB,kBAAOnC,MAAP,EAAelB,IAAf,CAAoB,CAACqC,GAAD,EAAMkB,CAAN,CAApB;AACD;AACF,QAPD;AAQD;AACF,IAdD;AAeAJ,YAAShD,OAAT,CAAiB,UAACsD,EAAD,EAAQ;AACvBH,eAAUG,GAAG,CAAH,CAAV,EAAiBA,GAAG,CAAH,CAAjB;AACD,IAFD;AAGA,OAAI1D,GAAJ,EAAS;AACPuD,eAAUF,YAAY,CAAZ,CAAV,EAA0BA,YAAY,CAAZ,CAA1B;AACD;;AAED9B,UAAOC,IAAP,CAAY8B,MAAZ,EAAoBlD,OAApB,CAA4B,UAACc,IAAD,EAAU;AACpCoC,YAAOpC,IAAP,EAAad,OAAb,CAAqB,UAACL,CAAD,EAAO;AAC1B,WAAIoD,IAAIP,OAAJ,CAAY7C,EAAE,CAAF,CAAZ,MAAsB,CAAC,CAA3B,EAA8B;AAC5BoD,aAAIlD,IAAJ,CAASF,EAAE,CAAF,CAAT;AACD;AACF,MAJD;AAKD,IAND;AAOA,UAAOoD,GAAP;AACD,E;;;;;;;;;AC3KD;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAMQ,OAAOC,gBAAMC,WAAN,CAAkB;AAAA;AAC7BC,kBAD6B,6BACX;AAChB,YAAO;AACLvE,yBADK;AAELwE,yBAAkB,IAFb;AAGLrB,qBAAc,CAAC,SAAD,EAAY,WAAZ,EAAyB,aAAzB;AAHT,MAAP;AAKD,IAP4B;AAQ7BsB,cAR6B,yBAQf,CACb,CAT4B;AAU7BC,cAV6B,uBAUjBC,IAViB,EAUX;AAChB;AACA,UAAKC,QAAL,CAAc;AACZzB,qBAAcwB,KAAKxB;AADP,MAAd;AAGD,IAf4B;AAgB7B0B,SAhB6B,kBAgBtBF,IAhBsB,EAgBhB;AACX,SAAMG,UAAUH,KAAKI,IAAL,CAAUC,KAAV,CAAgBC,QAAhC;AACA,SAAMC,UAAUP,KAAKQ,QAAL,CAAcH,KAAd,CAAoBC,QAApC;AACA;AACA,SAAMrC,OAAO,SAAPA,IAAO,CAACF,IAAD,EAAOjC,GAAP,EAAYkC,QAAZ,EAAyB;AACpCD,YAAK7B,OAAL,CAAa,UAACc,IAAD,EAAOb,KAAP,EAAcW,GAAd,EAAsB;AACjC,aAAIE,KAAKlB,GAAL,KAAaA,GAAjB,EAAsB;AACpB,kBAAOkC,SAAShB,IAAT,EAAeb,KAAf,EAAsBW,GAAtB,CAAP;AACD;AACD,aAAIE,KAAKpB,QAAT,EAAmB;AACjB,kBAAOqC,KAAKjB,KAAKpB,QAAV,EAAoBE,GAApB,EAAyBkC,QAAzB,CAAP;AACD;AACF,QAPD;AAQD,MATD;AAUA,SAAMD,oCAAW,KAAK0C,KAAL,CAAWpF,KAAtB,EAAN;AACA,SAAIqF,gBAAJ;AACAzC,UAAKF,IAAL,EAAWwC,OAAX,EAAoB,UAACvD,IAAD,EAAOb,KAAP,EAAcW,GAAd,EAAsB;AACxCA,WAAI6D,MAAJ,CAAWxE,KAAX,EAAkB,CAAlB;AACAuE,iBAAU1D,IAAV;AACD,MAHD;AAIA,SAAIgD,KAAKY,SAAT,EAAoB;AAClB,WAAIC,WAAJ;AACA,WAAIhF,UAAJ;AACAoC,YAAKF,IAAL,EAAWoC,OAAX,EAAoB,UAACnD,IAAD,EAAOb,KAAP,EAAcW,GAAd,EAAsB;AACxC+D,cAAK/D,GAAL;AACAjB,aAAIM,KAAJ;AACD,QAHD;AAIA0E,UAAGF,MAAH,CAAU9E,CAAV,EAAa,CAAb,EAAgB6E,OAAhB;AACD,MARD,MAQO;AACLzC,YAAKF,IAAL,EAAWoC,OAAX,EAAoB,UAACnD,IAAD,EAAU;AAC5BA,cAAKpB,QAAL,GAAgBoB,KAAKpB,QAAL,IAAiB,EAAjC;AACA;AACAoB,cAAKpB,QAAL,CAAcG,IAAd,CAAmB2E,OAAnB;AACD,QAJD;AAKD;AACD,UAAKT,QAAL,CAAc;AACZ5E,cAAO0C,IADK;AAEZS,qBAAcwB,KAAKc,eAAL,CAAqBjD,MAArB,CAA4B,CAACmC,KAAKI,IAAL,CAAUC,KAAV,CAAgBC,QAAjB,CAA5B;AAFF,MAAd;AAID,IAvD4B;AAwD7BS,WAxD6B,oBAwDpBvC,YAxDoB,EAwDN;AACrBhC,aAAQC,GAAR,CAAY,UAAZ,EAAwBuE,SAAxB;AACA,UAAKf,QAAL,CAAc;AACZzB,iCADY;AAEZqB,yBAAkB;AAFN,MAAd;AAID,IA9D4B;AA+D7BoB,SA/D6B,oBA+DpB;AACP,SAAMhD,OAAO,SAAPA,IAAO,OAAQ;AACnB,cAAOF,KAAKmD,GAAL,CAAS,UAAClE,IAAD,EAAU;AACxB,aAAIA,KAAKpB,QAAT,EAAmB;AACjB,kBAAO;AAAC,6BAAD;AAAA,eAAU,KAAKoB,KAAKlB,GAApB,EAAyB,OAAOkB,KAAKhB,KAArC;AAA6CiC,kBAAKjB,KAAKpB,QAAV;AAA7C,YAAP;AACD;AACD,gBAAO,8BAAC,gBAAD,IAAU,KAAKoB,KAAKlB,GAApB,EAAyB,OAAOkB,KAAKhB,KAArC,GAAP;AACD,QALM,CAAP;AAMD,MAPD;AAQA,YAAQ;AAAA;AAAA,SAAK,WAAU,gBAAf;AACN;AAAA;AAAA;AAAA;AAAA,QADM;AAEN;AAAA;AAAA;AAAA;AAAA,QAFM;AAGN;AAAA;AAAA,WAAK,WAAU,qBAAf;AACE;AAAC,2BAAD;AAAA;AACE,2BAAc,KAAKyE,KAAL,CAAWjC,YAD3B;AAEE,uBAAU,KAAKuC,QAFjB,EAE2B,kBAAkB,KAAKN,KAAL,CAAWZ,gBAFxD;AAGE,4BAHF;AAIE,0BAAa,KAAKC,WAJpB;AAKE,0BAAa,KAAKC,WALpB;AAME,qBAAQ,KAAKG;AANf;AAQGjC,gBAAK,KAAKwC,KAAL,CAAWpF,KAAhB;AARH;AADF;AAHM,MAAR;AAgBD;AAxF4B,EAAlB,CAAb;;AA2FA8F,oBAASF,MAAT,CAAgB,8BAAC,IAAD,OAAhB,EAA0BG,SAASC,cAAT,CAAwB,iBAAxB,CAA1B,E;;;;;;;AClGA,0C","file":"draggable.js","sourcesContent":["/* eslint no-loop-func: 0*/\r\n\r\nexport function generateData(x = 3, y = 2, z = 1, gData = []) {\r\n  // x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\r\n  function _loop(_level, _preKey, _tns) {\r\n    const preKey = _preKey || '0';\r\n    const tns = _tns || gData;\r\n\r\n    const children = [];\r\n    for (let i = 0; i < x; i++) {\r\n      const key = `${preKey}-${i}`;\r\n      tns.push({ title: `${key}-label`, key: `${key}-key` });\r\n      if (i < y) {\r\n        children.push(key);\r\n      }\r\n    }\r\n    if (_level < 0) {\r\n      return tns;\r\n    }\r\n    const __level = _level - 1;\r\n    children.forEach((key, index) => {\r\n      tns[index].children = [];\r\n      return _loop(__level, key, tns[index].children);\r\n    });\r\n  }\r\n  _loop(z);\r\n  return gData;\r\n}\r\nexport function calcTotal(x = 3, y = 2, z = 1) {\r\n  /* eslint no-param-reassign:0*/\r\n  const rec = (n) => n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\r\n  return rec(z + 1);\r\n}\r\nconsole.log('总节点数（单个tree）：', calcTotal());\r\n// 性能测试：总节点数超过 2000（z要小）明显感觉慢。z 变大时，递归多，会卡死。\r\n\r\nexport const gData = generateData();\r\n\r\nexport function isInclude(smallArray, bigArray) {\r\n  return smallArray.every((ii, i) => {\r\n    return ii === bigArray[i];\r\n  });\r\n}\r\n// console.log(isInclude(['0', '1'], ['0', '10', '1']));\r\n\r\n\r\n// arr.length === 628, use time: ~20ms\r\nexport function filterParentPosition(arr) {\r\n  const levelObj = {};\r\n  arr.forEach((item) => {\r\n    const posLen = item.split('-').length;\r\n    if (!levelObj[posLen]) {\r\n      levelObj[posLen] = [];\r\n    }\r\n    levelObj[posLen].push(item);\r\n  });\r\n  const levelArr = Object.keys(levelObj).sort();\r\n  for (let i = 0; i < levelArr.length; i++) {\r\n    if (levelArr[i + 1]) {\r\n      levelObj[levelArr[i]].forEach(ii => {\r\n        for (let j = i + 1; j < levelArr.length; j++) {\r\n          levelObj[levelArr[j]].forEach((_i, index) => {\r\n            if (isInclude(ii.split('-'), _i.split('-'))) {\r\n              levelObj[levelArr[j]][index] = null;\r\n            }\r\n          });\r\n          levelObj[levelArr[j]] = levelObj[levelArr[j]].filter(p => p);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  let nArr = [];\r\n  levelArr.forEach(i => {\r\n    nArr = nArr.concat(levelObj[i]);\r\n  });\r\n  return nArr;\r\n}\r\n// console.log(filterParentPosition(\r\n//   ['0-2', '0-3-3', '0-10', '0-10-0', '0-0-1', '0-0', '0-1-1', '0-1']\r\n// ));\r\n\r\n\r\nfunction loopData(data, callback) {\r\n  const loop = (d, level = 0) => {\r\n    d.forEach((item, index) => {\r\n      const pos = `${level}-${index}`;\r\n      if (item.children) {\r\n        loop(item.children, pos);\r\n      }\r\n      callback(item, index, pos);\r\n    });\r\n  };\r\n  loop(data);\r\n}\r\n\r\nfunction spl(str) {\r\n  return str.split('-');\r\n}\r\nfunction splitLen(str) {\r\n  return str.split('-').length;\r\n}\r\n\r\nexport function getFilterExpandedKeys(data, expandedKeys) {\r\n  const expandedPosArr = [];\r\n  loopData(data, (item, index, pos) => {\r\n    if (expandedKeys.indexOf(item.key) > -1) {\r\n      expandedPosArr.push(pos);\r\n    }\r\n  });\r\n  const filterExpandedKeys = [];\r\n  loopData(data, (item, index, pos) => {\r\n    expandedPosArr.forEach(p => {\r\n      if ((splitLen(pos) < splitLen(p)\r\n        && p.indexOf(pos) === 0 || pos === p)\r\n        && filterExpandedKeys.indexOf(item.key) === -1) {\r\n        filterExpandedKeys.push(item.key);\r\n      }\r\n    });\r\n  });\r\n  return filterExpandedKeys;\r\n}\r\n\r\nfunction isSibling(pos, pos1) {\r\n  pos.pop();\r\n  pos1.pop();\r\n  return pos.join(',') === pos1.join(',');\r\n}\r\n\r\nexport function getRadioSelectKeys(data, selectedKeys, key) {\r\n  const res = [];\r\n  const pkObjArr = [];\r\n  const selPkObjArr = [];\r\n  loopData(data, (item, index, pos) => {\r\n    if (selectedKeys.indexOf(item.key) > -1) {\r\n      pkObjArr.push([pos, item.key]);\r\n    }\r\n    if (key && key === item.key) {\r\n      selPkObjArr.push(pos, item.key);\r\n    }\r\n  });\r\n  const lenObj = {};\r\n  const getPosKey = (pos, k) => {\r\n    const posLen = splitLen(pos);\r\n    if (!lenObj[posLen]) {\r\n      lenObj[posLen] = [[pos, k]];\r\n    } else {\r\n      lenObj[posLen].forEach((pkArr, i) => {\r\n        if (isSibling(spl(pkArr[0]), spl(pos))) {\r\n          // 后来覆盖前者\r\n          lenObj[posLen][i] = [pos, k];\r\n        } else if (spl(pkArr[0]) !== spl(pos)) {\r\n          lenObj[posLen].push([pos, k]);\r\n        }\r\n      });\r\n    }\r\n  };\r\n  pkObjArr.forEach((pk) => {\r\n    getPosKey(pk[0], pk[1]);\r\n  });\r\n  if (key) {\r\n    getPosKey(selPkObjArr[0], selPkObjArr[1]);\r\n  }\r\n\r\n  Object.keys(lenObj).forEach((item) => {\r\n    lenObj[item].forEach((i) => {\r\n      if (res.indexOf(i[1]) === -1) {\r\n        res.push(i[1]);\r\n      }\r\n    });\r\n  });\r\n  return res;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/util.js","import 'rc-tree/assets/index.less';\r\nimport './draggable.less';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Tree, { TreeNode } from 'rc-tree';\r\nimport { gData } from './util';\r\n\r\nconst Demo = React.createClass({\r\n  getInitialState() {\r\n    return {\r\n      gData,\r\n      autoExpandParent: true,\r\n      expandedKeys: ['0-0-key', '0-0-0-key', '0-0-0-0-key'],\r\n    };\r\n  },\r\n  onDragStart() {\r\n  },\r\n  onDragEnter(info) {\r\n    // console.log(info);\r\n    this.setState({\r\n      expandedKeys: info.expandedKeys,\r\n    });\r\n  },\r\n  onDrop(info) {\r\n    const dropKey = info.node.props.eventKey;\r\n    const dragKey = info.dragNode.props.eventKey;\r\n    // const dragNodesKeys = info.dragNodesKeys;\r\n    const loop = (data, key, callback) => {\r\n      data.forEach((item, index, arr) => {\r\n        if (item.key === key) {\r\n          return callback(item, index, arr);\r\n        }\r\n        if (item.children) {\r\n          return loop(item.children, key, callback);\r\n        }\r\n      });\r\n    };\r\n    const data = [...this.state.gData];\r\n    let dragObj;\r\n    loop(data, dragKey, (item, index, arr) => {\r\n      arr.splice(index, 1);\r\n      dragObj = item;\r\n    });\r\n    if (info.dropToGap) {\r\n      let ar;\r\n      let i;\r\n      loop(data, dropKey, (item, index, arr) => {\r\n        ar = arr;\r\n        i = index;\r\n      });\r\n      ar.splice(i, 0, dragObj);\r\n    } else {\r\n      loop(data, dropKey, (item) => {\r\n        item.children = item.children || [];\r\n        // where to insert 示例添加到尾部，可以是随意位置\r\n        item.children.push(dragObj);\r\n      });\r\n    }\r\n    this.setState({\r\n      gData: data,\r\n      expandedKeys: info.rawExpandedKeys.concat([info.node.props.eventKey]),\r\n    });\r\n  },\r\n  onExpand(expandedKeys) {\r\n    console.log('onExpand', arguments);\r\n    this.setState({\r\n      expandedKeys,\r\n      autoExpandParent: false,\r\n    });\r\n  },\r\n  render() {\r\n    const loop = data => {\r\n      return data.map((item) => {\r\n        if (item.children) {\r\n          return <TreeNode key={item.key} title={item.title}>{loop(item.children)}</TreeNode>;\r\n        }\r\n        return <TreeNode key={item.key} title={item.title} />;\r\n      });\r\n    };\r\n    return (<div className=\"draggable-demo\">\r\n      <h2>draggable </h2>\r\n      <p>drag a node into another node</p>\r\n      <div className=\"draggable-container\">\r\n        <Tree\r\n          expandedKeys={this.state.expandedKeys}\r\n          onExpand={this.onExpand} autoExpandParent={this.state.autoExpandParent}\r\n          draggable\r\n          onDragStart={this.onDragStart}\r\n          onDragEnter={this.onDragEnter}\r\n          onDrop={this.onDrop}\r\n        >\r\n          {loop(this.state.gData)}\r\n        </Tree>\r\n      </div>\r\n    </div>);\r\n  },\r\n});\r\n\r\nReactDOM.render(<Demo />, document.getElementById('__react-content'));\r\n\n\n\n// WEBPACK FOOTER //\n// ./examples/draggable.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./examples/draggable.less\n// module id = 334\n// module chunks = 5"],"sourceRoot":""}